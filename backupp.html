<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://kit.fontawesome.com/64d58efce2.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="style.css" />
    <title>Sign in & Sign up Form</title>
  </head>
  <body>
    <div class="container">
      <div class="forms-container">
        <div class="signin-signup">
          <form action="#" class="sign-in-form">
            <h2 class="title">Sign in</h2>
            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="text" placeholder="Email" id="email-input" />
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" placeholder="Password" id="password-input" />
            </div>
            <input type="submit" value="Login" class="btn solid" />
            
          </form>
          <form action="#" class="sign-up-form">
            <h2 class="title">Sign up</h2>
            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="text" placeholder="Username" />
            </div>
            <div class="input-field">
              <i class="fas fa-envelope"></i>
              <input type="email" placeholder="Email" />
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" placeholder="Password" />
            </div>
            <input type="submit" class="btn" value="Sign up" />
            
            
          </form>
        </div>
      </div>

      <div class="panels-container">
        <div class="panel left-panel">
          <div class="content">
            <h3>New here ?</h3>
            <p>
                "Transforming keywords into captivating visuals, the synergy of a keyword-driven prompt 
                and AI image generator unlocks a new dimension of creative expression, 
                bridging the gap between ideas and stunning imagery."
            </p>
            <button class="btn transparent" id="sign-up-btn">
              Sign up
            </button>
          </div>
          <img src="img/log.svg" class="image" alt="" />
        </div>
        <div class="panel right-panel">
          <div class="content">
            <h3>One of us ?</h3>
            <p>
                "With the power of precision keywords, our AI image generator becomes a digital artist's palette, 
                translating abstract concepts into vibrant and visually compelling masterpieces." 
            </p>
            <button class="btn transparent" id="sign-in-btn">
              Sign in
            </button>
          </div>
          <img src="img/register.svg" class="image" alt="" />
        </div>
      </div>
    </div>


   <!-- Add this script block in your HTML file, after the existing JavaScript code -->
   <script>
    document.querySelector('.sign-in-form').addEventListener('submit', async function(event) {
        var username = document.getElementById('email-input').value;
        var password = document.getElementById('password-input').value;
  
        try {
            const response = await fetch('http://localhost:3000/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email: username, password: password }),
            });
  
            const data = await response.json();
  
            if (response.ok) {
                // Login successful, redirect to index.html or another page
                window.location.href = 'index.html';
            } else {
                // Handle unsuccessful login
                alert(data.message);
            }
        } catch (error) {
            console.error('Error during login:', error);
            alert('An error occurred. Please try again.');
        }
  
        event.preventDefault(); // Prevent the default form submission
    });
  
    document.querySelector('.sign-up-form').addEventListener('submit', async function(event) {
        var signupUsername = document.getElementById('signup-username-input').value;
        var signupEmail = document.getElementById('signup-email-input').value;
        var signupPassword = document.getElementById('signup-password-input').value;
  
        try {
            const response = await fetch('http://localhost:3000/signup', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ username: signupUsername, email: signupEmail, password: signupPassword }),
            });
  
            const data = await response.json();
  
            if (response.ok) {
                // Signup successful, you can handle this as needed (e.g., redirect)
                alert('Signup successful!'); // You might want to customize this message
            } else {
                // Handle unsuccessful signup
                alert(data.message);
            }
        } catch (error) {
            console.error('Error during signup:', error);
            alert('An error occurred. Please try again.');
        }
  
        event.preventDefault(); // Prevent the default form submission
    });
  </script>
    <script src="app.js"></script>
  </body>
</html>